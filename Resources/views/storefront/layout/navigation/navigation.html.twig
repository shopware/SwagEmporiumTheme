{# SwagEmporiumTheme Copyright (C) 2025 shopware AG #}

{% sw_extends '@Storefront/storefront/layout/navigation/navigation.html.twig' %}

{% block layout_main_navigation_menu_item %}
    {% if category.type == 'folder' %}
        <div class="nav-link main-navigation-link"
            {% if treeItem.children|length > 0 %}
                data-flyout-menu-trigger="{{ category.id }}"
            {% endif %}
             title="{{ name }}">
            <div class="main-navigation-link-text">
                <span itemprop="name">{{ name }}</span>
            </div>
            {% block layout_main_navigation_menu_link_item_flyouts %}
                <div class="main-navigation-link-flyouts">
                    {% sw_include '@Storefront/storefront/layout/navigation/categories.html.twig' with {navigationTree: treeItem.children, level: level+1, page: page, haveGrandChildren: haveGrandChildren } only %}
                </div>
            {% endblock %}
        </div>
    {% else %}
        <div class="main-navigation-wrapper">
            {% block layout_main_navigation_menu_item_title %}
                <a class="nav-link main-navigation-link{% if category.id == page.header.navigation.active.id %} active{% endif %}{% if category.id in activePath %} in-path{% endif %}"
                   href="{{ category_url(category) }}"
                   itemprop="url"
                   {% if category_linknewtab(category) %}target="_blank"{% endif %}
                   title="{{ name }}">
                    <div class="main-navigation-link-text">
                        <span itemprop="name">{{ name }}</span>

                        {% if treeItem.children|length > 0 %}
                            {% sw_icon 'ic-arrow-right' style { 'pack': 'emporium'} %}
                        {% endif %}
                    </div>
                </a>
            {% endblock %}

            {% block layout_main_navigation_menu_item_flyouts %}
                <div class="main-navigation-flyouts">
                    {% sw_include '@Storefront/storefront/layout/navigation/categories.html.twig' with {navigationTree: treeItem.children, level: level+1, page: page, haveGrandChildren: haveGrandChildren } only %}
                </div>
            {% endblock %}
        </div>
    {% endif %}
{% endblock %}

{% block layout_main_navigation_menu_home %}
{% endblock %}
