{% sw_extends '@Storefront/storefront/component/address/address-personal.html.twig' %}

{% block component_address_personal_company_name_input %}
    <input type="text"
           class="form-control{% if violationPath %} is-invalid{% endif %}"
           id="{{ idPrefix ~ prefix }}company"
           placeholder="{{ "address.companyNamePlaceholder"|trans|striptags }}{{ "general.required"|trans|sw_sanitize }}"
           name="company"
           value="{{ data.get('company') }}"
           data-form-validation-required
           {% if requiredMessage is defined %}data-form-validation-required-message="{{ requiredMessage }}"{% endif %}
           required="required">
{% endblock %}

{% block component_address_form_salutation_select %}
    <select id="{{ idPrefix ~ prefix }}personalSalutation"
            class="{{ formSelectClass }}{% if formViolations.getViolations('/salutationId') is not empty %} is-invalid{% endif %}"
            name="{% if prefix %}{{ prefix }}[salutationId]{% else %}salutationId{% endif %}"
            required="required">
        {% if not data.get('salutationId') %}
            <option disabled="disabled"
                    selected="selected"
                    value="">
                {{ "account.personalSalutationPlaceholder"|trans|sw_sanitize }}{{ "general.required"|trans|sw_sanitize }}
            </option>
        {% endif %}
        {% for salutation in page.salutations %}
            <option {% if salutation.id == data.get('salutationId') %}
                selected="selected"
            {% endif %}
                value="{{ salutation.id }}">
                {{ salutation.translated.displayName }}
            </option>
        {% endfor %}
    </select>
{% endblock %}

{% block component_address_personal_fields_first_name_input %}
    <input type="text"
           class="form-control{% if violationPath is not empty %} is-invalid{% endif %}"
           autocomplete="section-personal given-name"
           id="{{ idPrefix ~ prefix }}personalFirstName"
           placeholder="{{ "account.personalFirstNamePlaceholder"|trans|striptags }}{{ "general.required"|trans|sw_sanitize }}"
           name="{% if prefix %}{{ prefix }}[firstName]{% else %}firstName{% endif %}"
           value="{{ data.get('firstName') }}"
           data-form-validation-required
           {% if requiredMessage is defined %}data-form-validation-required-message="{{ requiredMessage }}"{% endif %}
           required="required">
{% endblock %}

{% block component_address_personal_fields_last_name_input %}
    <input type="text"
           class="form-control{% if violationPath %} is-invalid{% endif %}"
           autocomplete="section-personal family-name"
           id="{{ idPrefix ~ prefix }}personalLastName"
           placeholder="{{ "account.personalLastNamePlaceholder"|trans|striptags }}{{ "general.required"|trans|sw_sanitize }}"
           name="{% if prefix %}{{ prefix }}[lastName]{% else %}lastName{% endif %}"
           value="{{ data.get('lastName') }}"
           data-form-validation-required
           {% if requiredMessage is defined %}data-form-validation-required-message="{{ requiredMessage }}"{% endif %}
           required="required">
{% endblock %}

{% block component_address_personal_fields_salutation %}
    <div class="form-group col-sm-6 col-lg-2 contact-salutation">
        {{ block('component_address_form_salutation_select') }}

        {{ block('component_address_form_salutation_select_error') }}
    </div>
{% endblock %}

{% block component_address_personal_fields_title %}
    {% apply spaceless %}
        <div class="form-group col-lg-4 col-sm-6 contact-title">
            {% if config('core.loginRegistration.showTitleField') %}
                {{ block('component_address_personal_fields_title_input') }}
            {% endif %}
        </div>
    {% endapply %}
{% endblock %}

{% block component_address_personal_fields_name %}{% endblock %}

{% block component_address_personal_fields_birthday_label %}{% endblock %}

{% block component_address_personal_fields_salutation_title %}
    <div class="{{ formRowClass }}">
        {{ block('component_address_personal_fields_salutation') }}

        {{ block('component_address_personal_fields_title') }}

        {{ block('component_address_personal_fields_first_name') }}

        {{ block('component_address_personal_fields_last_name') }}
    </div>
{% endblock %}

{% block component_address_personal_fields_birthday_select_day %}
    <div class="form-group col-12 col-md-4 col-lg-2">
        <select id="{{ idPrefix ~ prefix }}personalBirthday"
                name="{% if prefix %}{{ prefix }}[birthdayDay]{% else %}birthdayDay{% endif %}"
                class="{{ formSelectClass }}{% if formViolations.getViolations('/birthdayDay') is not empty %} is-invalid{% endif %}"
            {{ config('core.loginRegistration.birthdayFieldRequired') ? 'required="required"' }}>
            {% if not data.get('birthdayDay') %}
                <option selected="selected"
                        value="">
                    {{ "account.personalBirthdaySelectDay"|trans|sw_sanitize }}
                </option>
            {% endif %}
            {% for day in range(1, 31) %}
                <option value="{{ day }}"
                    {% if day == data.get('birthdayDay') %} selected="selected"{% endif %}>
                    {{ day }}
                </option>
            {% endfor %}
        </select>

        {{ block('component_address_personal_fields_birthday_select_day_error') }}
    </div>
{% endblock %}

{% block component_address_personal_fields_birthday_select_month %}
    <div class="form-group col-12 col-md-4 col-lg-2">
        <select name="{% if prefix %}{{ prefix }}[birthdayMonth]{% else %}birthdayMonth{% endif %}"
                class="{{ formSelectClass }}{% if formViolations.getViolations('/birthdayMonth') is not empty %} is-invalid{% endif %}"
            {{ config('core.loginRegistration.birthdayFieldRequired') ? 'required="required"' }}>
            {% if not data.get('birthdayMonth') %}
                <option selected="selected"
                        value="">
                    {{ "account.personalBirthdaySelectMonth"|trans|sw_sanitize }}
                </option>
            {% endif %}
            {% for month in range(1, 12) %}
                <option value="{{ month }}"
                    {% if month == data.get('birthdayMonth') %} selected="selected"{% endif %}>
                    {{ month }}
                </option>
            {% endfor %}
        </select>

        {{ block('component_address_personal_fields_birthday_select_month_error') }}
    </div>
{% endblock %}

{% block component_address_personal_fields_birthday_select_year %}
    <div class="form-group col-12 col-md-4 col-lg-2">
        {% set currentYear = "now"|date('Y') %}
        {% set startYear = currentYear - 120 %}

        <select name="{% if prefix %}{{ prefix }}[birthdayYear]{% else %}birthdayYear{% endif %}"
                class="{{ formSelectClass }}{% if formViolations.getViolations('/birthdayYear') is not empty %} is-invalid{% endif %}"
            {{ config('core.loginRegistration.birthdayFieldRequired') ? 'required="required"' }}>
            {% if not data.get('birthdayYear') %}
                <option selected="selected"
                        value="">
                    {{ "account.personalBirthdaySelectYear"|trans|sw_sanitize }}
                </option>
            {% endif %}
            {% for year in range(currentYear, startYear) %}
                <option value="{{ year }}"
                    {% if year == data.get('birthdayYear') %} selected="selected"{% endif %}>
                    {{ year }}
                </option>
            {% endfor %}
        </select>

        {{ block('component_address_personal_fields_birthday_select_year_error') }}
    </div>
{% endblock %}
