"use strict";(self.webpackChunk=self.webpackChunk||[]).push([["custom_apps_SwagEmporiumTheme_Resources_app_storefront_src_plugin_listing_emt-filter-rating-s-c8d7d0"],{911:(t,e,i)=>{i.r(e),i.d(e,{default:()=>f});var r,n,s,o=i(206),l=i(966),a=i(285);class c extends a.Z{_init(){super._init(),this._validateMethods();const t=o.Z.querySelector(document,this.options.parentFilterPanelSelector);this.listing=window.PluginManager.getPluginInstanceFromElement(t,"Listing"),this.listing.registerFilter(this),this._preventDropdownClose()}_preventDropdownClose(){const t=o.Z.querySelector(this.el,this.options.dropdownSelector,!1);t&&t.addEventListener("click",(t=>{t.stopPropagation()}))}_validateMethods(){if("function"!=typeof this.getValues)throw new Error(`[${this._pluginName}] Needs the method "getValues"'`);if("function"!=typeof this.getLabels)throw new Error(`[${this._pluginName}] Needs the method "getLabels"'`);if("function"!=typeof this.reset)throw new Error(`[${this._pluginName}] Needs the method "reset"'`);if("function"!=typeof this.resetAll)throw new Error(`[${this._pluginName}] Needs the method "resetAll"'`)}}r=c,s={parentFilterPanelSelector:".cms-element-product-listing-wrapper",dropdownSelector:".filter-panel-item-dropdown"},(n=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var r=i.call(t,e||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}(n="options"))in r?Object.defineProperty(r,n,{value:s,enumerable:!0,configurable:!0,writable:!0}):r[n]=s;var u=i(857),h=i.n(u);class p extends c{init(){this.selection=[],this.counter=o.Z.querySelector(this.el,this.options.countSelector),this._registerEvents()}_registerEvents(){const t=o.Z.querySelectorAll(this.el,this.options.checkboxSelector);l.Z.iterate(t,(t=>{t.addEventListener("change",this._onChangeFilter.bind(this))}))}getValues(){const t=o.Z.querySelectorAll(this.el,`${this.options.checkboxSelector}:checked`,!1);let e=[];t?l.Z.iterate(t,(t=>{e.push(t.id)})):e=[],this.selection=e,this._updateCount();const i={};return i[this.options.name]=e,i}getLabels(){const t=o.Z.querySelectorAll(this.el,`${this.options.checkboxSelector}:checked`,!1);let e=[];return t?l.Z.iterate(t,(t=>{e.push({label:t.dataset.label,id:t.id})})):e=[],e}setValuesFromUrl(t={}){let e=!1;const i=t[this.options.name],r=i?i.split("|"):[],n=this.selection.filter((t=>!r.includes(t))),s=r.filter((t=>!this.selection.includes(t)));return(n.length>0||s.length>0)&&(e=!0),s.forEach((t=>{const e=o.Z.querySelector(this.el,`[id="${t}"]`,!1);e&&(e.checked=!0,this.selection.push(e.id))})),n.forEach((t=>{this.reset(t),this.selection=this.selection.filter((e=>e!==t))})),this._updateCount(),e}_onChangeFilter(){this.listing.changeListing(!0,{p:1})}reset(t){const e=o.Z.querySelector(this.el,`[id="${t}"]`,!1);e&&(e.checked=!1)}resetAll(){this.selection.filter=[];const t=o.Z.querySelectorAll(this.el,`${this.options.checkboxSelector}:checked`,!1);t&&l.Z.iterate(t,(t=>{t.checked=!1}))}refreshDisabledState(t){const e=t[this.options.name];!e.entities||e.entities.length<1?this.disableFilter():(this.enableFilter(),this._disableInactiveFilterOptions(e.entities.map((t=>t.id))))}_disableInactiveFilterOptions(t){const e=o.Z.querySelectorAll(this.el,this.options.checkboxSelector);l.Z.iterate(e,(e=>{!0!==e.checked&&(t.includes(e.id)?this.enableOption(e):this.disableOption(e))}))}disableOption(t){const e=t.closest(this.options.listItemSelector);e.classList.add("disabled"),e.setAttribute("title",this.options.snippets.disabledFilterText),t.disabled=!0}enableOption(t){const e=t.closest(this.options.listItemSelector);e.removeAttribute("title"),e.classList.remove("disabled"),t.disabled=!1}enableAllOptions(){const t=o.Z.querySelectorAll(this.el,this.options.checkboxSelector);l.Z.iterate(t,(t=>{this.enableOption(t)}))}disableFilter(){const t=o.Z.querySelector(this.el,this.options.mainFilterButtonSelector);t.classList.add("disabled"),t.setAttribute("disabled","disabled"),t.setAttribute("title",this.options.snippets.disabledFilterText)}enableFilter(){const t=o.Z.querySelector(this.el,this.options.mainFilterButtonSelector);t.classList.remove("disabled"),t.removeAttribute("disabled"),t.removeAttribute("title")}_updateCount(){this.counter.innerText=this.selection.length?`(${this.selection.length})`:""}}!function(t,e,i){(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var r=i.call(t,e||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i}(p,"options",h()(c.options,{checkboxSelector:".filter-multi-select-checkbox",countSelector:".filter-multi-select-count",listItemSelector:".filter-multi-select-list-item",snippets:{disabledFilterText:"Filter not active"},mainFilterButtonSelector:".filter-panel-item-toggle"}));class d extends p{getValues(){const t={},e=o.Z.querySelector(this.el,`${this.options.checkboxSelector}:checked`,!1);return this.currentRating=e.value,this._updateCount(),t[this.options.name]=this.currentRating?this.currentRating.toString():"",t}setValuesFromUrl(t){let e=!1;return Object.keys(t).forEach((i=>{if(i===this.options.name){this.currentRating=t[i],this._updateCount();const r=o.Z.querySelectorAll(this.el,this.options.checkboxSelector,!1);r&&l.Z.iterate(r,(t=>{t.value===this.currentRating&&(t.checked=!0)})),e=!0}})),e}getLabels(){const t=o.Z.querySelector(this.el,this.options.checkboxSelector+":checked",!1).value;let e=[];if(t){let i=this.options.snippets.filterRatingActiveLabelEnd;1===parseInt(t)&&(i=this.options.snippets.filterRatingActiveLabelEndSingular),e.push({label:`${this.options.snippets.filterRatingActiveLabelStart}\n                        ${t}/${this.options.maxPoints}\n                        ${i}`,id:"rating"})}else e=[];return e}refreshDisabledState(t){const e=t[this.options.name].max;if(e&&e>0)return this.enableFilter(),void this._disableInactiveFilterOptions(e);this.disableFilter()}_disableInactiveFilterOptions(t){const e=o.Z.querySelectorAll(this.el,this.options.checkboxSelector);l.Z.iterate(e,(e=>{!0!==e.checked&&(t>=e.value?this.enableOption(e):this.disableOption(e))}))}reset(){this.resetAll()}_updateCount(){this.counter.innerText=this.currentRating?`(${this.currentRating}/${this.options.maxPoints})`:""}}!function(t,e,i){(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var r=i.call(t,e||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i}(d,"options",h()(p.options,{maxPoints:5,snippets:{filterRatingActiveLabelStart:"Minimum",filterRatingActiveLabelEndSingular:"star",filterRatingActiveLabelEnd:"stars",disabledFilterText:"Filter not active"}}));class f extends d{getLabels(){const t=o.Z.querySelector(this.el,this.options.checkboxSelector+":checked",!1).value;let e=[];if(t){let i=this.options.snippets.filterRatingActiveLabelEnd;1===parseInt(t,10)&&(i=this.options.snippets.filterRatingActiveLabelEndSingular),e.push({label:`${this.options.snippets.filterRatingActiveLabelStart}\n                        ${t}/${this.options.maxPoints}\n                        ${i}`,id:"rating",currentRatingPercent:parseInt(t/this.options.maxPoints*100,10)})}else e=[];return e}}},206:(t,e,i)=>{i.d(e,{Z:()=>n});var r=i(435);class n{static isNode(t){return"object"==typeof t&&null!==t&&(t===document||t===window||t instanceof Node)}static hasAttribute(t,e){if(!n.isNode(t))throw new Error("The element must be a valid HTML Node!");return"function"==typeof t.hasAttribute&&t.hasAttribute(e)}static getAttribute(t,e,i=!0){if(i&&!1===n.hasAttribute(t,e))throw new Error(`The required property "${e}" does not exist!`);if("function"==typeof t.getAttribute)return t.getAttribute(e);if(i)throw new Error("This node doesn't support the getAttribute function!")}static getDataAttribute(t,e,i=!0){const s=e.replace(/^data(|-)/,""),o=r.Z.toLowerCamelCase(s,"-");if(!n.isNode(t)){if(i)throw new Error("The passed node is not a valid HTML Node!");return}if(void 0===t.dataset){if(i)throw new Error("This node doesn't support the dataset attribute!");return}const l=t.dataset[o];if(void 0===l){if(i)throw new Error(`The required data attribute "${e}" does not exist on ${t}!`);return l}return r.Z.parsePrimitive(l)}static querySelector(t,e,i=!0){if(i&&!n.isNode(t))throw new Error("The parent node is not a valid HTML Node!");const r=t.querySelector(e)||!1;if(i&&!1===r)throw new Error(`The required element "${e}" does not exist in parent node!`);return r}static querySelectorAll(t,e,i=!0){if(i&&!n.isNode(t))throw new Error("The parent node is not a valid HTML Node!");let r=t.querySelectorAll(e);if(0===r.length&&(r=!1),i&&!1===r)throw new Error(`At least one item of "${e}" must exist in parent node!`);return r}}},5:(t,e,i)=>{i.d(e,{Z:()=>r});class r{constructor(t=document){this._el=t,t.$emitter=this,this._listeners=[]}publish(t,e={},i=!1){const r=new CustomEvent(t,{detail:e,cancelable:i});return this.el.dispatchEvent(r),r}subscribe(t,e,i={}){const r=this,n=t.split(".");let s=i.scope?e.bind(i.scope):e;if(i.once&&!0===i.once){const e=s;s=function(i){r.unsubscribe(t),e(i)}}return this.el.addEventListener(n[0],s),this.listeners.push({splitEventName:n,opts:i,cb:s}),!0}unsubscribe(t){const e=t.split(".");return this.listeners=this.listeners.reduce(((t,i)=>i.splitEventName.sort().toString()===e.sort().toString()?(this.el.removeEventListener(i.splitEventName[0],i.cb),t):(t.push(i),t)),[]),!0}reset(){return this.listeners.forEach((t=>{this.el.removeEventListener(t.splitEventName[0],t.cb)})),this.listeners=[],!0}get el(){return this._el}set el(t){this._el=t}get listeners(){return this._listeners}set listeners(t){this._listeners=t}}},966:(t,e,i)=>{i.d(e,{Z:()=>r});class r{static iterate(t,e){if(t instanceof Map)return t.forEach(e);if(Array.isArray(t))return t.forEach(e);if(!(t instanceof FormData)){if(t instanceof NodeList)return t.forEach(e);if(t instanceof HTMLCollection)return Array.from(t).forEach(e);if(t instanceof Object)return Object.keys(t).forEach((i=>{e(t[i],i)}));throw new Error(`The element type ${typeof t} is not iterable!`)}for(var i of t.entries())e(i[1],i[0])}}},435:(t,e,i)=>{i.d(e,{Z:()=>r});class r{static ucFirst(t){return t.charAt(0).toUpperCase()+t.slice(1)}static lcFirst(t){return t.charAt(0).toLowerCase()+t.slice(1)}static toDashCase(t){return t.replace(/([A-Z])/g,"-$1").replace(/^-/,"").toLowerCase()}static toLowerCamelCase(t,e){const i=r.toUpperCamelCase(t,e);return r.lcFirst(i)}static toUpperCamelCase(t,e){if(!e)return r.ucFirst(t.toLowerCase());return t.split(e).map((t=>r.ucFirst(t.toLowerCase()))).join("")}static parsePrimitive(t){try{return/^\d+(.|,)\d+$/.test(t)&&(t=t.replace(",",".")),JSON.parse(t)}catch(e){return t.toString()}}}},285:(t,e,i)=>{i.d(e,{Z:()=>a});var r=i(857),n=i.n(r),s=i(206),o=i(435),l=i(5);class a{constructor(t,e={},i=!1){if(!s.Z.isNode(t))throw new Error("There is no valid element given.");this.el=t,this.$emitter=new l.Z(this.el),this._pluginName=this._getPluginName(i),this.options=this._mergeOptions(e),this._initialized=!1,this._registerInstance(),this._init()}init(){throw new Error(`The "init" method for the plugin "${this._pluginName}" is not defined.`)}update(){}_init(){this._initialized||(this.init(),this._initialized=!0)}_update(){this._initialized&&this.update()}_mergeOptions(t){const e=o.Z.toDashCase(this._pluginName),i=s.Z.getDataAttribute(this.el,`data-${e}-config`,!1),r=s.Z.getAttribute(this.el,`data-${e}-options`,!1),l=[this.constructor.options,this.options,t];i&&l.push(window.PluginConfigManager.get(this._pluginName,i));try{r&&l.push(JSON.parse(r))}catch(t){throw console.error(this.el),new Error(`The data attribute "data-${e}-options" could not be parsed to json: ${t.message}`)}return n().all(l.filter((t=>t instanceof Object&&!(t instanceof Array))).map((t=>t||{})))}_registerInstance(){window.PluginManager.getPluginInstancesFromElement(this.el).set(this._pluginName,this);window.PluginManager.getPlugin(this._pluginName,!1).get("instances").push(this)}_getPluginName(t){return t||(t=this.constructor.name),t}}},857:t=>{var e=function(t){return function(t){return!!t&&"object"==typeof t}(t)&&!function(t){var e=Object.prototype.toString.call(t);return"[object RegExp]"===e||"[object Date]"===e||function(t){return t.$$typeof===i}(t)}(t)};var i="function"==typeof Symbol&&Symbol.for?Symbol.for("react.element"):60103;function r(t,e){return!1!==e.clone&&e.isMergeableObject(t)?a((i=t,Array.isArray(i)?[]:{}),t,e):t;var i}function n(t,e,i){return t.concat(e).map((function(t){return r(t,i)}))}function s(t){return Object.keys(t).concat(function(t){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(t).filter((function(e){return t.propertyIsEnumerable(e)})):[]}(t))}function o(t,e){try{return e in t}catch(t){return!1}}function l(t,e,i){var n={};return i.isMergeableObject(t)&&s(t).forEach((function(e){n[e]=r(t[e],i)})),s(e).forEach((function(s){(function(t,e){return o(t,e)&&!(Object.hasOwnProperty.call(t,e)&&Object.propertyIsEnumerable.call(t,e))})(t,s)||(o(t,s)&&i.isMergeableObject(e[s])?n[s]=function(t,e){if(!e.customMerge)return a;var i=e.customMerge(t);return"function"==typeof i?i:a}(s,i)(t[s],e[s],i):n[s]=r(e[s],i))})),n}function a(t,i,s){(s=s||{}).arrayMerge=s.arrayMerge||n,s.isMergeableObject=s.isMergeableObject||e,s.cloneUnlessOtherwiseSpecified=r;var o=Array.isArray(i);return o===Array.isArray(t)?o?s.arrayMerge(t,i,s):l(t,i,s):r(i,s)}a.all=function(t,e){if(!Array.isArray(t))throw new Error("first argument should be an array");return t.reduce((function(t,i){return a(t,i,e)}),{})};var c=a;t.exports=c}}]);